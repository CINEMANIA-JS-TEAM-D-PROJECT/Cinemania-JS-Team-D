{"version":3,"file":"index.js","sources":["../src/js/upcoming.js","../src/js/weekly_trends.js"],"sourcesContent":["// API ayarları\r\nconst API_KEY = 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI1YzYxMTQwZGRhOGZlM2QwOTRlZTJjNjNmMDVhNzY4NCIsIm5iZiI6MTc0MzcxMzIxNS4wNTQwMDAxLCJzdWIiOiI2N2VlZjNiZmIzZTAzNTI4NmNkOTE5NmMiLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.cMbD5QK1f9Kk4TMQuYUvz52-u2EFK-3KGTrtJp0fEI0';\r\nconst BASE_URL = 'https://api.themoviedb.org/3';\r\nlet allMovies = []; \r\n\r\n// Fetch seçenekleri\r\nfunction getFetchOptions() {\r\n  return {\r\n    method: 'GET',\r\n    headers: {\r\n      accept: 'application/json',\r\n      Authorization: API_KEY,\r\n    },\r\n  };\r\n}\r\n\r\n// Responsive görsel URL'si\r\nfunction getResponsiveImageUrl(movie) {\r\n  if (window.innerWidth < 768) {\r\n    return movie.poster_path\r\n      ? `https://image.tmdb.org/t/p/w342${movie.poster_path}`\r\n      : './assets/images/no-poster.jpg';\r\n  } else {\r\n    if (movie.backdrop_path) {\r\n      return `https://image.tmdb.org/t/p/w780${movie.backdrop_path}`;\r\n    } else if (movie.poster_path) {\r\n      return `https://image.tmdb.org/t/p/w342${movie.poster_path}`;\r\n    } else {\r\n      return './assets/images/no-poster.jpg';\r\n    }\r\n  }\r\n}\r\n\r\n// Upcoming filmleri çek\r\nasync function fetchUpcomingMovies() {\r\n  const url = `${BASE_URL}/movie/upcoming?language=en-US&page=1`;\r\n  const response = await fetch(url, getFetchOptions());\r\n  if (!response.ok) {\r\n    throw new Error('Upcoming filmler alınırken hata oluştu.');\r\n  }\r\n  const data = await response.json();\r\n  return data.results;\r\n}\r\n\r\n// Tüm türleri (genre) çek\r\nasync function fetchAllGenres() {\r\n  const url = `${BASE_URL}/genre/movie/list?language=en-US`;\r\n  const response = await fetch(url, getFetchOptions());\r\n  if (!response.ok) {\r\n    throw new Error('Film türleri alınırken hata oluştu.');\r\n  }\r\n  const data = await response.json();\r\n  return data.genres;\r\n}\r\n\r\n// DOM referansları\r\nconst refs = {\r\n  imgBox: document.querySelector('.img-box-upcoming'),\r\n  movieTitle: document.querySelector('.upcoming-header-2'),\r\n  releaseDateText: document.querySelector('.release-date-text-upcoming'),\r\n  voteAverageElement: document.querySelector('.vote-average-upcoming'),\r\n  voteCountElement: document.querySelector('.vote-count-upcoming'),\r\n  popularityText: document.querySelector('.popularity-text-upcoming'),\r\n  genreText: document.querySelector('.genre-text-upcoming'),\r\n  aboutText: document.querySelector('.upcoming-about-text'),\r\n  addToLibraryBtn: document.querySelector('.upcoming-button'),\r\n};\r\n\r\n// Film verilerini render et\r\nfunction renderUpcomingMovie(movie, allGenres) {\r\n  const imageUrl = getResponsiveImageUrl(movie);\r\n  refs.imgBox.style.backgroundImage = `url(${imageUrl})`;\r\n\r\n  refs.movieTitle.textContent = movie.title || 'No Title';\r\n  refs.releaseDateText.textContent = movie.release_date || 'No Release Date';\r\n\r\n  const voteAverage =\r\n    movie.vote_average !== undefined && movie.vote_average !== null\r\n      ? movie.vote_average.toFixed(1)\r\n      : '0.0';\r\n  const voteCount =\r\n    movie.vote_count !== undefined && movie.vote_count !== null\r\n      ? movie.vote_count\r\n      : '0';\r\n\r\n  if (refs.voteAverageElement) {\r\n    refs.voteAverageElement.textContent = voteAverage;\r\n  }\r\n  if (refs.voteCountElement) {\r\n    refs.voteCountElement.textContent = voteCount;\r\n  }\r\n\r\n  refs.popularityText.textContent = movie.popularity\r\n    ? movie.popularity.toFixed(1)\r\n    : '0.0';\r\n\r\n  const movieGenreNames = (movie.genre_ids || []).map((id) => {\r\n    const genre = allGenres.find((g) => g.id === id);\r\n    return genre ? genre.name : 'Unknown';\r\n  });\r\n  refs.genreText.textContent = movieGenreNames.join(', ') || 'No Genres';\r\n\r\n  refs.aboutText.textContent = movie.overview || 'No overview available.';\r\n\r\n  setupLibraryButton(movie); // Butonu kur\r\n}\r\n\r\n// LocalStorage'dan film ekle/çıkar\r\nfunction toggleLibrary(movie) {\r\n  const libraryKey = 'library';\r\n  const storedLibrary = JSON.parse(localStorage.getItem(libraryKey)) || [];\r\n  const index = storedLibrary.findIndex((item) => item.id === movie.id);\r\n  const button = document.querySelector('.upcoming-button');\r\n\r\n  if (index !== -1) {\r\n    storedLibrary.splice(index, 1);\r\n    localStorage.setItem(libraryKey, JSON.stringify(storedLibrary));\r\n    \r\n    if (button) button.textContent = 'Add to my library';\r\n  } else {\r\n    storedLibrary.push(movie);\r\n    localStorage.setItem(libraryKey, JSON.stringify(storedLibrary));\r\n    \r\n    if (button) button.textContent = 'Remove from my library';\r\n  }\r\n}\r\n\r\n// Buton durumunu ayarla ve click eventi bağla\r\nfunction setupLibraryButton(movie) {\r\n  const button = document.querySelector('.upcoming-button');\r\n  const libraryKey = 'library';\r\n  const storedLibrary = JSON.parse(localStorage.getItem(libraryKey)) || [];\r\n  const isAlreadyInLibrary = storedLibrary.some((item) => item.id === movie.id);\r\n\r\n  if (button) {\r\n    button.textContent = isAlreadyInLibrary ? 'Remove from my library' : 'Add to my library';\r\n    button.addEventListener('click', () => toggleLibrary(movie));\r\n  }\r\n}\r\n\r\n// Başlatıcı\r\nasync function initUpcomingMovie() {\r\n  try {\r\n    const [allGenres, upcomingMovies] = await Promise.all([\r\n      fetchAllGenres(),\r\n      fetchUpcomingMovies(),\r\n    ]);\r\n\r\n    if (upcomingMovies.length > 0) {\r\n      const randomIndex = Math.floor(Math.random() * upcomingMovies.length);\r\n      const randomMovie = upcomingMovies[randomIndex];\r\n      renderUpcomingMovie(randomMovie, allGenres);\r\n      \r\n    } else {\r\n      console.log('Upcoming film bulunamadı.');\r\n    }\r\n  } catch (error) {\r\n    console.error('Hata:', error);\r\n  }\r\n}\r\n\r\n// Başlat\r\ninitUpcomingMovie();\r\n\r\n// Ekran boyutu değişince yeniden yükle\r\nwindow.addEventListener('resize', () => {\r\n  location.reload();\r\n});\r\n","import { openModal, closeModal } from './modal.js';\r\nconst options = {\r\n  method: 'GET',\r\n  headers: {\r\n    accept: 'application/json',\r\n    Authorization:\r\n      'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzZDA5M2Y5MzcwZWVhYjYyZGRhZDEyMTViYTMzYzdkYyIsIm5iZiI6MTc0Mzc5MjUzNi41MTMsInN1YiI6IjY3ZjAyOTk4ZjVhODBhYTU0NTk5NTM5MCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.kD8CV4_F8L2GVoP85qrIIvPuEascfTURrC1KNOeDj4Q',\r\n  },\r\n};\r\n\r\nconst genreMap = {\r\n  28: 'Aksiyon',\r\n  12: 'Macera',\r\n  16: 'Animasyon',\r\n  35: 'Komedi',\r\n  80: 'Suç',\r\n  99: 'Belgesel',\r\n  18: 'Drama',\r\n  10751: 'Aile',\r\n  14: 'Fantastik',\r\n  36: 'Tarih',\r\n  27: 'Korku',\r\n  10402: 'Müzik',\r\n  9648: 'Gizem',\r\n  10749: 'Romantik',\r\n  878: 'Bilim Kurgu',\r\n  10770: 'TV Film',\r\n  53: 'Gerilim',\r\n  10752: 'Savaş',\r\n  37: 'Vahşi Batı',\r\n};\r\n\r\nfunction getGenreNames(genreIds) {\r\n  return genreIds\r\n    .map(id => genreMap[id])\r\n    .filter(name => name)\r\n    .slice(0, 2); // En fazla 2 tür göster\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const theme = localStorage.getItem('theme'); // 'dark' veya 'light'\r\n  const titleElement = document.querySelector('.weekly-title');\r\n  const cardContainer = document.getElementById('weekly-cards');\r\n  const loader = document.getElementById('loader-weekly');\r\n\r\n  fetch('https://api.themoviedb.org/3/trending/all/day?language=en-US', options)\r\n    .then(res => res.json())\r\n    .then(data => {\r\n      const movies = data.results.slice(0, 3);\r\n      cardContainer.innerHTML = '';\r\n      loader.style.display = 'none';\r\n\r\n      movies.forEach(movie => {\r\n        const imageUrl = movie.poster_path\r\n          ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`\r\n          : 'https://via.placeholder.com/500x750?text=No+Image';\r\n\r\n        const title = movie.title || movie.name || 'Untitled';\r\n        const genres = getGenreNames(movie.genre_ids).join(', ');\r\n        const releaseYear = (\r\n          movie.release_date ||\r\n          movie.first_air_date ||\r\n          'Unknown'\r\n        ).split('-')[0];\r\n        const rating = Math.round((movie.vote_average || 0) * 10) / 10;\r\n\r\n        const maxStars = 5;\r\n        const fullStars = Math.floor(rating / 2);\r\n        const halfStar = rating % 2 >= 1 ? 1 : 0;\r\n        const emptyStars = maxStars - fullStars - halfStar;\r\n\r\n        const stars = [\r\n          ...Array(fullStars).fill(\r\n            '<svg class=\"star-weekly full\"><use xlink:href=\"#icon-star\"></use></svg>'\r\n          ),\r\n          ...Array(halfStar).fill(\r\n            '<svg class=\"star-weekly half\"><use xlink:href=\"#icon-star-half\"></use></svg>'\r\n          ),\r\n          ...Array(emptyStars).fill(\r\n            '<svg class=\"star-weekly empty\"><use xlink:href=\"#icon-star-outline\"></use></svg>'\r\n          ),\r\n        ].join('');\r\n\r\n        const card = document.createElement('div');\r\n        card.className = 'card-weekly';\r\n        card.style.backgroundImage = `url(${imageUrl})`;\r\n        card.style.backgroundSize = 'cover';\r\n        card.style.backgroundPosition = 'center';\r\n        card.style.display = 'none';\r\n        card.style.display = 'flex';\r\n        card.style.alignItems = 'flex-end';\r\n        card.style.borderRadius = '10px';\r\n        card.style.position = 'relative';\r\n        card.style.overflow = 'hidden';\r\n        card.style.boxShadow =\r\n          ' linear-gradient(180deg, rgba(0, 0, 0, 0) 63.48%, rgba(0, 0, 0, 0.9) 92.16%)';\r\n\r\n        card.innerHTML = `\r\n          <div class=\"card-weekly-content\">\r\n             <h3 >${title}</h3>\r\n             <p >${genres} | ${releaseYear}</p>\r\n           </div>\r\n           <span class=\"star-weekly\"> ${stars}</span>\r\n\r\n         `;\r\n        cardContainer.appendChild(card);\r\n\r\n        card.addEventListener('click', () => {\r\n          openModal(movie);\r\n        });\r\n      });\r\n    })\r\n    .catch(err => {\r\n      console.error('Error fetching data:', err);\r\n      cardContainer.innerHTML = '<p>Error loading movies.</p>';\r\n      loader.style.display = 'none';\r\n    });\r\n});\r\n"],"names":["API_KEY","BASE_URL","getFetchOptions","getResponsiveImageUrl","movie","fetchUpcomingMovies","url","response","fetchAllGenres","refs","renderUpcomingMovie","allGenres","imageUrl","voteAverage","voteCount","movieGenreNames","id","genre","g","setupLibraryButton","toggleLibrary","libraryKey","storedLibrary","index","item","button","isAlreadyInLibrary","initUpcomingMovie","upcomingMovies","randomIndex","randomMovie","error","options","genreMap","getGenreNames","genreIds","name","cardContainer","loader","res","data","movies","title","genres","releaseYear","rating","maxStars","fullStars","halfStar","emptyStars","stars","card","openModal","err"],"mappings":"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"}