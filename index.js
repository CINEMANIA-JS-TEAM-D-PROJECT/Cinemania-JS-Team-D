import{o as x}from"./assets/main-CIQFArmN.js";const I="Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI1YzYxMTQwZGRhOGZlM2QwOTRlZTJjNjNmMDVhNzY4NCIsIm5iZiI6MTc0MzcxMzIxNS4wNTQwMDAxLCJzdWIiOiI2N2VlZjNiZmIzZTAzNTI4NmNkOTE5NmMiLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.cMbD5QK1f9Kk4TMQuYUvz52-u2EFK-3KGTrtJp0fEI0",m="https://api.themoviedb.org/3";function y(){return{method:"GET",headers:{accept:"application/json",Authorization:I}}}function v(e){return window.innerWidth<768?e.poster_path?`https://image.tmdb.org/t/p/w342${e.poster_path}`:"./assets/images/no-poster.jpg":e.backdrop_path?`https://image.tmdb.org/t/p/w780${e.backdrop_path}`:e.poster_path?`https://image.tmdb.org/t/p/w342${e.poster_path}`:"./assets/images/no-poster.jpg"}async function M(){const e=`${m}/movie/upcoming?language=en-US&page=1`,t=await fetch(e,y());if(!t.ok)throw new Error("Upcoming filmler alınırken hata oluştu.");return(await t.json()).results}async function w(){const e=`${m}/genre/movie/list?language=en-US`,t=await fetch(e,y());if(!t.ok)throw new Error("Film türleri alınırken hata oluştu.");return(await t.json()).genres}const a={imgBox:document.querySelector(".img-box-upcoming"),movieTitle:document.querySelector(".upcoming-header-2"),releaseDateText:document.querySelector(".release-date-text-upcoming"),voteAverageElement:document.querySelector(".vote-average-upcoming"),voteCountElement:document.querySelector(".vote-count-upcoming"),popularityText:document.querySelector(".popularity-text-upcoming"),genreText:document.querySelector(".genre-text-upcoming"),aboutText:document.querySelector(".upcoming-about-text"),addToLibraryBtn:document.querySelector(".upcoming-button")};function T(e,t){const n=v(e);a.imgBox.style.backgroundImage=`url(${n})`,a.movieTitle.textContent=e.title||"No Title",a.releaseDateText.textContent=e.release_date||"No Release Date";const i=e.vote_average!==void 0&&e.vote_average!==null?e.vote_average.toFixed(1):"0.0",o=e.vote_count!==void 0&&e.vote_count!==null?e.vote_count:"0";a.voteAverageElement&&(a.voteAverageElement.textContent=i),a.voteCountElement&&(a.voteCountElement.textContent=o),a.popularityText.textContent=e.popularity?e.popularity.toFixed(1):"0.0";const s=(e.genre_ids||[]).map(c=>{const l=t.find(d=>d.id===c);return l?l.name:"Unknown"});a.genreText.textContent=s.join(", ")||"No Genres",a.aboutText.textContent=e.overview||"No overview available.",S(e)}function k(e){const t="library",n=JSON.parse(localStorage.getItem(t))||[],i=n.findIndex(s=>s.id===e.id),o=document.querySelector(".upcoming-button");i!==-1?(n.splice(i,1),localStorage.setItem(t,JSON.stringify(n)),o&&(o.textContent="Add to my library")):(n.push(e),localStorage.setItem(t,JSON.stringify(n)),o&&(o.textContent="Remove from my library"))}function S(e){const t=document.querySelector(".upcoming-button"),o=(JSON.parse(localStorage.getItem("library"))||[]).some(s=>s.id===e.id);t&&(t.textContent=o?"Remove from my library":"Add to my library",t.addEventListener("click",()=>k(e)))}async function N(){try{const[e,t]=await Promise.all([w(),M()]);if(t.length>0){const n=Math.floor(Math.random()*t.length),i=t[n];T(i,e)}else console.log("Upcoming film bulunamadı.")}catch(e){console.error("Hata:",e)}}N();window.addEventListener("resize",()=>{location.reload()});const E={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzZDA5M2Y5MzcwZWVhYjYyZGRhZDEyMTViYTMzYzdkYyIsIm5iZiI6MTc0Mzc5MjUzNi41MTMsInN1YiI6IjY3ZjAyOTk4ZjVhODBhYTU0NTk5NTM5MCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.kD8CV4_F8L2GVoP85qrIIvPuEascfTURrC1KNOeDj4Q"}},C={28:"Aksiyon",12:"Macera",16:"Animasyon",35:"Komedi",80:"Suç",99:"Belgesel",18:"Drama",10751:"Aile",14:"Fantastik",36:"Tarih",27:"Korku",10402:"Müzik",9648:"Gizem",10749:"Romantik",878:"Bilim Kurgu",10770:"TV Film",53:"Gerilim",10752:"Savaş",37:"Vahşi Batı"};function z(e){return e.map(t=>C[t]).filter(t=>t).slice(0,2)}document.addEventListener("DOMContentLoaded",()=>{localStorage.getItem("theme"),document.querySelector(".weekly-title");const e=document.getElementById("weekly-cards"),t=document.getElementById("loader-weekly");fetch("https://api.themoviedb.org/3/trending/all/day?language=en-US",E).then(n=>n.json()).then(n=>{const i=n.results.slice(0,3);e.innerHTML="",t.style.display="none",i.forEach(o=>{const s=o.poster_path?`https://image.tmdb.org/t/p/w500${o.poster_path}`:"https://via.placeholder.com/500x750?text=No+Image",c=o.title||o.name||"Untitled",l=z(o.genre_ids).join(", "),d=(o.release_date||o.first_air_date||"Unknown").split("-")[0],u=Math.round((o.vote_average||0)*10)/10,h=5,g=Math.floor(u/2),p=u%2>=1?1:0,f=h-g-p,b=[...Array(g).fill('<svg class="star-weekly full"><use xlink:href="#icon-star"></use></svg>'),...Array(p).fill('<svg class="star-weekly half"><use xlink:href="#icon-star-half"></use></svg>'),...Array(f).fill('<svg class="star-weekly empty"><use xlink:href="#icon-star-outline"></use></svg>')].join(""),r=document.createElement("div");r.className="card-weekly",r.style.backgroundImage=`url(${s})`,r.style.backgroundSize="cover",r.style.backgroundPosition="center",r.style.display="none",r.style.display="flex",r.style.alignItems="flex-end",r.style.borderRadius="10px",r.style.position="relative",r.style.overflow="hidden",r.style.boxShadow=" linear-gradient(180deg, rgba(0, 0, 0, 0) 63.48%, rgba(0, 0, 0, 0.9) 92.16%)",r.innerHTML=`
          <div class="card-weekly-content">
             <h3 >${c}</h3>
             <p >${l} | ${d}</p>
           </div>
           <span class="star-weekly"> ${b}</span>

         `,e.appendChild(r),r.addEventListener("click",()=>{x(o)})})}).catch(n=>{console.error("Error fetching data:",n),e.innerHTML="<p>Error loading movies.</p>",t.style.display="none"})});
//# sourceMappingURL=index.js.map
